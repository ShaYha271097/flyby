{"version":3,"sources":["pages/Marketplace/components/Complete/CompleteCard.tsx","pages/Marketplace/components/CompletedAuctions.tsx"],"names":["CompleteCard","data","templateId","Number","marketTemplate","BatchCard","CrowSaleCard","UpcomingAuctions","getDataAuction","useAllMarket","useState","dataMap","setDataMap","useAuctionState","state","numPage","setNumPage","numPageSearch","currentPage","setCurrentPage","limitPage","valueSearch","dataSearch","datas","completed","noData","setNoData","loading","useActiveWeb3React","account","chainId","hiddenAuctions","accountHasHiddenAuctions","setPage","page","getMapData","a","reverse","Math","ceil","length","pageData","slice","Promise","all","map","item","index","address","dataAuction","useEffect","then","res","filter","includes","undefined","FlybyLogo","language","COMPLETED_SALES","toUpperCase","NO_COMPLETED_MARKET","LoadingComponent","key","Pagination","setPages","num"],"mappings":"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","file":"static/js/27.8cebaccb.chunk.js","sourcesContent":["import React from 'react'\nimport BatchCard from '../Card/BatchCard'\nimport CrowSaleCard from '../Card/CrowSaleCard'\n\nconst CompleteCard = ({ data }: { data: any }) => {\n\n    const templateId = Number(data.marketTemplate)\n    return (\n        <>\n            {\n                templateId === 2\n                ? <BatchCard data={data} />\n                : <CrowSaleCard data={data} />\n            }\n        </>\n    )\n}\n\nexport default CompleteCard","import React, { useEffect, useState } from \"react\";\n\nimport { useAllMarket } from \"../../../hooks/useAllMarket\";\nimport { useAuctionState } from \"../../../store\";\nimport Pagination from \"../../../components/Pagination\";\nimport {\n    WrapperPagination,\n    NoMarket,\n    Wrapper,\n    Title,\n    WrapperAuctions,\n    SearchBar,\n} from \"./styled\";\nimport LoadingComponent from \"../../../components/Loading/LoadingComponent\";\nimport CompleteCard from \"./Complete/CompleteCard\";\nimport FlybyLogo from \"../../../pages/FlybyLogo\";\nimport { useActiveWeb3React } from \"../../../hooks\";\n// import IndexedDb from '../../../utils/indexDB'\n// import { INDEXDB_OBJECT_STORE } from '../../../constants'\n\nconst UpcomingAuctions = () => {\n    const { getDataAuction } = useAllMarket();\n    const [dataMap, setDataMap]: any = useState();\n    const [state] = useAuctionState();\n    const [numPage, setNumPage] = useState(0);\n    const [numPageSearch, setNumPageSearch] = useState(0);\n    const [currentPage, setCurrentPage] = useState(0);\n    const [limitPage] = useState(12);\n    const [valueSearch, setValueSearch]: any = useState();\n    const [dataSearch, setDataSearch]: any = useState();\n    const datas: any = state.datas.completed;\n    const [noData, setNoData] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const { account, chainId } = useActiveWeb3React();\n    const hiddenAuctions = [\"0x2b822DD37E0B8295434F0E50Da7250Fa4D4C4e2c\"];\n    const accountHasHiddenAuctions = [\n        \"0x00B91B2F8aFE87FCDc2b3fFA9ee2278cd1E4DDf8\",\n        \"0xF5b85B1A7Ec0685A1dc349aa04dD36A6EB5Efb5F\",\n    ];\n\n    const setPage = (page: any) => {\n        setCurrentPage(page);\n    };\n\n    const getMapData = async () => {\n        datas.reverse();\n        setNumPage(Math.ceil(datas.length / limitPage));\n        const pageData: any =\n            datas.slice(\n                currentPage * limitPage,\n                (currentPage + 1) * limitPage\n            ) || [];\n        const dataAuction = await Promise.all(\n            pageData?.map(async (item: any, index: any) => {\n                const data = await getDataAuction(item.address);\n                return data;\n            })\n        );\n        return dataAuction;\n    };\n\n    // const searchAuction = async (e: any) => {\n    //     setValueSearch(e.target.value);\n    //     setLoading(true);\n    //     setDataSearch();\n    //     const dataAddressSearch = datas.filter(\n    //         (item: any) => item.address === e.target.value\n    //     );\n    //     setNumPageSearch(Math.ceil(dataAddressSearch.length / limitPage));\n    //     const dataAuction: any = await Promise.all(\n    //         dataAddressSearch?.map(async (item: any, index: any) => {\n    //             const data = await getDataAuction(item.address);\n    //             return data;\n    //         })\n    //     );\n    //     setLoading(false);\n    //     if (dataAuction.length !== 0) {\n    //         setDataSearch(dataAuction);\n    //     }\n    // };\n\n    // const getDataIndexDB = async() => {\n    //     const indexedDb = new IndexedDb('flyby');\n    //     await indexedDb.createObjectStore(INDEXDB_OBJECT_STORE);\n    //     const dataIndexDB = await indexedDb.getAllValue('auction_completed');\n    //     if (!datas) {\n    //         if (dataIndexDB && dataIndexDB.length !== 0) {\n    //             setDataMap(dataIndexDB[dataIndexDB.length - 1].data)\n    //         }\n    //     }\n    // }\n\n    useEffect(() => {\n        if (datas && datas.length > 0) {\n            getMapData().then(async (res: any) => {\n                if (res && res.length === 0) {\n                    setNoData(true);\n                } else {\n                    const data = res?.filter((item: any) => {\n                        if (\n                            account &&\n                            accountHasHiddenAuctions.includes(account)\n                        ) {\n                            return !accountHasHiddenAuctions.includes(account)\n                                ? item !== undefined &&\n                                      !hiddenAuctions.includes(item.address)\n                                : item !== undefined;\n                        }\n                        // else return item !== undefined\n                        else return item === 0;\n                    });\n                    setDataMap(data);\n                }\n            });\n        }\n    }, [datas, currentPage, account]);\n\n    return (\n        <Wrapper>\n            <FlybyLogo />\n            <Title>{state.language?.COMPLETED_SALES.toUpperCase()}</Title>\n            {/* <SearchBar\n                onChange={searchAuction}\n                type=\"text\"\n                placeholder=\"Paste the address to search for auction\"\n            /> */}\n            {!account || !chainId ? (\n                <WrapperPagination>\n                    <NoMarket>Please connect your wallet</NoMarket>\n                </WrapperPagination>\n            ) : (!noData && datas && datas.length === 0) ||\n              (dataMap && dataMap.length === 0) ? (\n                <WrapperPagination>\n                    <NoMarket>{state.language?.NO_COMPLETED_MARKET}</NoMarket>\n                </WrapperPagination>\n            ) : !dataMap ? (\n                <LoadingComponent />\n            ) : (\n                <>\n                    <WrapperAuctions>\n                        {valueSearch ? (\n                            !loading ? (\n                                dataSearch ? (\n                                    dataSearch.map((item: any, index: any) => (\n                                        <CompleteCard key={index} data={item} />\n                                    ))\n                                ) : (\n                                    <NoMarket>\n                                        {state.language?.NO_COMPLETED_MARKET}\n                                    </NoMarket>\n                                )\n                            ) : (\n                                <LoadingComponent />\n                            )\n                        ) : dataMap && dataMap.length > 0 ? (\n                            dataMap.map((item: any, index: any) => (\n                                <CompleteCard key={index} data={item} />\n                            ))\n                        ) : (\n                            <></>\n                        )}\n                    </WrapperAuctions>\n                    <WrapperPagination>\n                        {valueSearch ? (\n                            !loading ? (\n                                dataSearch ? (\n                                    <Pagination\n                                        setPages={setPage}\n                                        num={numPageSearch}\n                                        currentPage={currentPage}\n                                    />\n                                ) : (\n                                    <></>\n                                )\n                            ) : (\n                                <></>\n                            )\n                        ) : dataMap && dataMap.length > 0 ? (\n                            <Pagination\n                                setPages={setPage}\n                                num={numPage}\n                                currentPage={currentPage}\n                            />\n                        ) : (\n                            <></>\n                        )}\n                    </WrapperPagination>\n                </>\n            )}\n        </Wrapper>\n    );\n};\n\nexport default UpcomingAuctions;\n"],"sourceRoot":""}